	### TODO LIST
	#		1. Directory Path setting
	#		2. Custom name for file
	# 		3. Repair text in box
	#		4. Implement script as a tool in workbench


from PySide import QtGui, QtCore
import Mesh


#from PySide.QtGui import QWidget, QLabel, QHBoxLayout, QPushButton, QFont


class MyGui(QtGui.QWidget):
	def __init__(self):
		super(MyGui, self).__init__()
		
		'''
		#Font and Text
		font = QFont("Arial", 15)
		label = QLabel("Select the geometry and press 'Export' ",self)
		label.setFont(font)
		#label.setAlignment(Qt.AlignCenter)
		'''
		
		#Window
		self.setWindowFlags(QtCore.Qt.WindowStaysOnTopHint)
		self.setWindowTitle("STL Exporting Settings")
		self.resize(550,200)
		self.show()

		#Buttons
		self.bt_start = QtGui.QPushButton("Export", self)
		self.bt_stop = QtGui.QPushButton("Close", self)
		QtCore.QObject.connect(self.bt_start, QtCore.SIGNAL("pressed()"), self.bt_start_click)
		QtCore.QObject.connect(self.bt_stop, QtCore.SIGNAL("pressed()"), self.bt_stop_click)

		#Layout 
		layout = QtGui.QGridLayout()
		layout.addWidget(self.bt_start, 0,0)
		layout.addWidget(self.bt_stop, 0,1)

		self.setLayout(layout)
		


	def bt_start_click(self):
		App.Console.PrintMessage("Exporting...\n")

		#userInputName = QtGui.QInputDialog.getText(None,"Enter file's name:", "Please enter file's name")[0]

		#Exporting stl
		doc = FreeCAD.ActiveDocument
		object = FreeCADGui.Selection.getSelection()
		#print object.FreeCADGui.Selection.__name__

		#name = FreeCADGui.Selection.__name__
	
	########### ONLY VALID FOR MY COMPUTER - CHANGE IT FOR YOUR OWN PURPOSE #############
		Mesh.export(object,u"C:/Users/DanielP/Desktop/Unnamed-Myshape.stl")
	

	def bt_stop_click(self):
		App.Console.PrintMessage("Closing...\n")	
		self.close()


gui = MyGui()
